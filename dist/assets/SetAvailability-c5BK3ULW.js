import{r as b,d as p,f as S,j as s,a as f,b as x}from"./index-CJD_FPq6.js";const M=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"];function y(i,d){const[r,l]=d.split(" ");let[e,a]=r.split(":").map(Number);l==="PM"&&e!==12&&(e+=12),l==="AM"&&e===12&&(e=0);const c=new Date(i);return c.setHours(e,a,0,0),c.toISOString()}function w(i,d,r){const[l,e]=d.split(" ");let[a,c]=l.split(":").map(Number);e==="PM"&&a!==12&&(a+=12),e==="AM"&&a===12&&(a=0);const u=new Date(i);return u.setHours(a,c+r,0,0),u.toISOString()}function v(){const[i,d]=b.useState(new Date),[r,l]=b.useState([]),[e,a]=b.useState(!1),c=p(),{toast:u}=S(),g=t=>{l(n=>n.includes(t)?n.filter(m=>m!==t):[...n,t])},h=async()=>{a(!0);const t=f.get("auth");let n="";if(t)try{n=JSON.parse(t).token}catch{n=""}const m=r.map(o=>({startTime:y(i,o),endTime:w(i,o,30)}));try{const o=await x.post("/doctors/availability",{date:i.toISOString().split("T")[0],timeSlots:m},{headers:{Authorization:`Bearer ${n}`}});o.data&&o.data.success&&(u({title:"Success",description:"Slot selected Successfully!",variant:"default",className:"bg-green-500 text-white"}),l([]),c(-1))}catch{u({title:"Error",description:"Failed to set availability.",variant:"default",className:"bg-red-500 text-white"})}finally{a(!1)}};return s.jsxs("div",{className:"p-8 bg-[#FAF8FB] min-h-screen font-['Poppins']",children:[s.jsx("h1",{className:"text-3xl font-semibold mb-6 text-gray-800",children:"Set Availability"}),s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md w-full max-w-lg mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"date",className:"text-lg font-semibold mb-2",value:i.toISOString().split("T")[0],onChange:t=>d(new Date(t.target.value))})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Slots Available"}),s.jsx("div",{className:"grid grid-cols-3 gap-4 mb-8",children:M.map(t=>s.jsx("button",{className:`py-2 rounded-full border ${r.includes(t)?"bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] text-white":"bg-white text-gray-700 border-gray-300"}`,onClick:()=>g(t),type:"button",children:t},t))})]}),s.jsx("button",{className:"w-full py-3 rounded-full bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] text-white font-semibold text-lg",onClick:h,disabled:e,children:e?"Setting...":"Set Availability"})]})]})}export{v as default};
