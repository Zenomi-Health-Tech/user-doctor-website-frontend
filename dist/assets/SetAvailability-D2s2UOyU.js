import{r as p,b as h,d as S,j as s,a as f}from"./index-eotYzDwS.js";import{a as x}from"./api-d8MCFFl8.js";import"./index-DW_MHI2K.js";const M=["10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM"];function y(i,d){const[r,l]=d.split(" ");let[e,a]=r.split(":").map(Number);l==="PM"&&e!==12&&(e+=12),l==="AM"&&e===12&&(e=0);const c=new Date(i);return c.setHours(e,a,0,0),c.toISOString()}function w(i,d,r){const[l,e]=d.split(" ");let[a,c]=l.split(":").map(Number);e==="PM"&&a!==12&&(a+=12),e==="AM"&&a===12&&(a=0);const u=new Date(i);return u.setHours(a,c+r,0,0),u.toISOString()}function A(){const[i,d]=p.useState(new Date),[r,l]=p.useState([]),[e,a]=p.useState(!1),c=h(),{toast:u}=S(),b=t=>{l(o=>o.includes(t)?o.filter(m=>m!==t):[...o,t])},g=async()=>{a(!0);const t=f.get("auth");let o="";if(t)try{o=JSON.parse(t).token}catch{o=""}const m=r.map(n=>({startTime:y(i,n),endTime:w(i,n,30)}));try{const n=await x.post("/doctors/availability",{date:i.toISOString().split("T")[0],timeSlots:m},{headers:{Authorization:`Bearer ${o}`}});n.data&&n.data.success&&(u({title:"Success",description:"Slot selected Successfully!",variant:"default",className:"bg-green-500 text-white"}),l([]),c(-1))}catch{u({title:"Error",description:"Failed to set availability.",variant:"default",className:"bg-red-500 text-white"})}finally{a(!1)}};return s.jsxs("div",{className:"p-8 bg-[#FAF8FB] min-h-screen font-['Poppins']",children:[s.jsx("h1",{className:"text-3xl font-semibold mb-6 text-gray-800",children:"Set Availability"}),s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md w-full max-w-lg mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"date",className:"text-lg font-semibold mb-2",value:i.toISOString().split("T")[0],onChange:t=>d(new Date(t.target.value))})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Slots Available"}),s.jsx("div",{className:"grid grid-cols-3 gap-4 mb-8",children:M.map(t=>s.jsx("button",{className:`py-2 rounded-full border ${r.includes(t)?"bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] text-white":"bg-white text-gray-700 border-gray-300"}`,onClick:()=>b(t),type:"button",children:t},t))})]}),s.jsx("button",{className:"w-full py-3 rounded-full bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] text-white font-semibold text-lg",onClick:g,disabled:e,children:e?"Setting...":"Set Availability"})]})]})}export{A as default};
