import{c as y,r as l,b as j,j as t,S as b,a as v}from"./index-f2NuT0sn.js";import{a as w}from"./api-BGtq2ZBv.js";import{S as C}from"./sliders-horizontal-CHWejZDM.js";import"./index-DW_MHI2K.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=y("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),A=["All","Completed","Rescheduled","Rejected","Upcoming"];function D(){const[r,c]=l.useState({previous:[],upcoming:[]}),[p,m]=l.useState(!0),[n,x]=l.useState(""),[o,h]=l.useState("All"),d=j();l.useEffect(()=>{(async()=>{m(!0);try{const s=v.get("auth");let i="";if(s)try{i=JSON.parse(s).token}catch{i=""}const a=await w.get("/doctors/appointments",{headers:{Authorization:`Bearer ${i}`}});console.log("Appointments API response:",a.data),a.data.success&&a.data.data&&Array.isArray(a.data.data.previous_appointments)&&Array.isArray(a.data.data.upcoming_appointments)?c({previous:a.data.data.previous_appointments,upcoming:a.data.data.upcoming_appointments}):c({previous:[],upcoming:[]})}catch{c({previous:[],upcoming:[]})}finally{m(!1)}})()},[]);const u=o==="All"?r.previous.filter(e=>{var s;return((s=e.user)==null?void 0:s.name)&&e.user.name.toLowerCase().includes(n.toLowerCase())}):o==="Completed"?r.previous.filter(e=>{var s;return e.status==="COMPLETED"&&((s=e.user)==null?void 0:s.name)&&e.user.name.toLowerCase().includes(n.toLowerCase())}):o==="Rescheduled"?r.previous.filter(e=>{var s;return e.status==="RESCHEDULED"&&((s=e.user)==null?void 0:s.name)&&e.user.name.toLowerCase().includes(n.toLowerCase())}):o==="Rejected"?r.previous.filter(e=>{var s;return e.status==="REJECTED"&&((s=e.user)==null?void 0:s.name)&&e.user.name.toLowerCase().includes(n.toLowerCase())}):r.upcoming.filter(e=>{var s;return((s=e.user)==null?void 0:s.name)&&e.user.name.toLowerCase().includes(n.toLowerCase())}),f=e=>{const s={year:"numeric",month:"short",day:"numeric"};return new Date(e).toLocaleDateString(void 0,s)},g=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return t.jsxs("div",{className:"p-8 bg-[#FAF8FB] min-h-screen font-['Poppins']",children:[t.jsx("h1",{className:"text-3xl font-semibold mb-6 text-gray-800",children:"Appointment Details"}),t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search your appointments here",className:"w-full py-3 pl-10 pr-4 rounded-full bg-white border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#8B2D6C]",value:n,onChange:e=>x(e.target.value)})]}),t.jsxs("div",{className:"flex gap-2 ml-4",children:[t.jsx("button",{onClick:()=>d("/appointments/available-slots"),className:"p-3 rounded-full bg-white border border-gray-200 shadow-sm",children:t.jsx(C,{className:"w-5 h-5 text-gray-500"})}),t.jsx("button",{className:"p-3 rounded-full bg-white border border-gray-200 shadow-sm",onClick:()=>d("/appointments/set-availability"),children:t.jsx(N,{className:"w-5 h-5 text-gray-500"})})]})]}),t.jsx("div",{className:"flex border-b mb-6",children:A.map(e=>t.jsx("button",{className:`px-4 pb-2 text-lg font-medium focus:outline-none ${o===e?"border-b-2 border-[#8B2D6C] text-[#8B2D6C]":"text-gray-500"}`,onClick:()=>h(e),children:e},e))}),p?t.jsx("div",{className:"flex justify-center items-center h-40 text-xl",children:"Loading appointments..."}):t.jsx("div",{className:"space-y-4",children:u.length>0?u.map(e=>{var s;return t.jsxs("div",{className:"bg-white rounded-2xl p-4 flex items-center justify-between shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-[#8B2D6C1A] flex items-center justify-center text-[#8B2D6C] font-semibold text-lg",children:e.user&&e.user.name?e.user.name.split(" ").map(i=>i[0]).join("").toUpperCase():""}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-800 text-lg",children:(s=e.user)==null?void 0:s.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Date: ",f(e.preferredDate)," Time: ",g(e.preferredTime)]})]})]}),e.status==="COMPLETED"&&t.jsx("span",{className:"bg-green-600 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Completed"}),e.status==="UPCOMING"&&t.jsx("span",{className:"bg-yellow-400 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Upcoming"}),e.status==="RESCHEDULED"&&t.jsx("span",{className:"bg-yellow-400 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Rescheduled"}),e.status==="REJECTED"&&t.jsx("span",{className:"bg-red-400 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Rejected"})]},e.id)}):t.jsx("div",{className:"text-center text-gray-500 text-lg mt-10",children:"No appointments found."})})]})}const R=()=>t.jsx(D,{});export{R as default};
