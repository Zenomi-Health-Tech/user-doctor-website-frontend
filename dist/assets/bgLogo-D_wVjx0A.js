import{b as R}from"./index-CM3hlDZ7.js";import{R as k,g as N,c as b,s as _}from"./index-mcBuM8Fe.js";const E=e=>{let o;const t=new Set,r=(y,a)=>{const p=typeof y=="function"?y(o):y;if(!Object.is(p,o)){const S=o;o=a??(typeof p!="object"||p===null)?p:Object.assign({},o,p),t.forEach(f=>f(o,S))}},n=()=>o,s={setState:r,getState:n,getInitialState:()=>h,subscribe:y=>(t.add(y),()=>t.delete(y))},h=o=e(r,n,s);return s},D=e=>e?E(e):E,j=e=>e;function L(e,o=j){const t=k.useSyncExternalStore(e.subscribe,()=>o(e.getState()),()=>o(e.getInitialState()));return k.useDebugValue(t),t}const P=e=>{const o=D(e),t=r=>L(o,r);return Object.assign(t,o),t},U=e=>e?P(e):P,A={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},T=new Map,O=e=>{const o=T.get(e);return o?Object.fromEntries(Object.entries(o.stores).map(([t,r])=>[t,r.getState()])):{}},x=(e,o,t)=>{if(e===void 0)return{type:"untracked",connection:o.connect(t)};const r=T.get(t.name);if(r)return{type:"tracked",store:e,...r};const n={connection:o.connect(t),stores:{}};return T.set(t.name,n),{type:"tracked",store:e,...n}},q=(e,o={})=>(t,r,n)=>{const{enabled:l,anonymousActionType:u,store:s,...h}=o;let y;try{y=(l??(A?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!y)return e(t,r,n);const{connection:a,...p}=x(s,y,h);let S=!0;n.setState=(c,m,i)=>{const d=t(c,m);if(!S)return d;const w=i===void 0?{type:u||"anonymous"}:typeof i=="string"?{type:i}:i;return s===void 0?(a==null||a.send(w,r()),d):(a==null||a.send({...w,type:`${s}/${w.type}`},{...O(h.name),[s]:n.getState()}),d)};const f=(...c)=>{const m=S;S=!1,t(...c),S=m},I=e(n.setState,r,n);if(p.type==="untracked"?a==null||a.init(I):(p.stores[p.store]=n,a==null||a.init(Object.fromEntries(Object.entries(p.stores).map(([c,m])=>[c,c===p.store?I:m.getState()])))),n.dispatchFromDevtools&&typeof n.dispatch=="function"){let c=!1;const m=n.dispatch;n.dispatch=(...i)=>{(A?"production":void 0)!=="production"&&i[0].type==="__setState"&&!c&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),c=!0),m(...i)}}return a.subscribe(c=>{var m;switch(c.type){case"ACTION":if(typeof c.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return C(c.payload,i=>{if(i.type==="__setState"){if(s===void 0){f(i.state);return}Object.keys(i.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const d=i.state[s];if(d==null)return;JSON.stringify(n.getState())!==JSON.stringify(d)&&f(d);return}n.dispatchFromDevtools&&typeof n.dispatch=="function"&&n.dispatch(i)});case"DISPATCH":switch(c.payload.type){case"RESET":return f(I),s===void 0?a==null?void 0:a.init(n.getState()):a==null?void 0:a.init(O(h.name));case"COMMIT":if(s===void 0){a==null||a.init(n.getState());return}return a==null?void 0:a.init(O(h.name));case"ROLLBACK":return C(c.state,i=>{if(s===void 0){f(i),a==null||a.init(n.getState());return}f(i[s]),a==null||a.init(O(h.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return C(c.state,i=>{if(s===void 0){f(i);return}JSON.stringify(n.getState())!==JSON.stringify(i[s])&&f(i[s])});case"IMPORT_STATE":{const{nextLiftedState:i}=c.payload,d=(m=i.computedStates.slice(-1)[0])==null?void 0:m.state;if(!d)return;f(s===void 0?d:d[s]),a==null||a.send(null,i);return}case"PAUSE_RECORDING":return S=!S}return}}),I},J=q,C=(e,o)=>{let t;try{t=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}t!==void 0&&o(t)},g=R.create({baseURL:"https://zenomi.elitceler.com/api/v1",headers:{"Content-Type":"application/json"}});g.interceptors.request.use(e=>{const o=N(),t=o==null?void 0:o.token;return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request error:",e),Promise.reject(e)));const v=e=>{if(e.response){const{data:o}=e.response;return o.status==="error"?o.error||o.message||"An unexpected error occurred.":o.message||"An unexpected error occurred."}return"Network error. Please try again."},z=(e,o,t,r,n,l)=>{e&&localStorage.setItem("companyName",e),o&&localStorage.setItem("email",o),t&&localStorage.setItem("logo",t)},B=()=>{localStorage.removeItem("companyName"),localStorage.removeItem("email"),localStorage.removeItem("logo"),localStorage.removeItem("businessName"),localStorage.removeItem("buisnessEmail"),localStorage.removeItem("buisnessWebsite")},M=(e,o)=>({phoneNumber:"",countryCode:"",user:N()||null,tempToken:null,error:null,loading:!1,orderId:null,setPhoneNumber:t=>e({phoneNumber:t}),setCountryCode:t=>e({countryCode:t}),sendOtp:async t=>{e({loading:!0,error:null});try{const{phoneNumber:r}=o(),n={countryCode:t,phoneNumber:r},l=await g.post("otp-service/send-otp",n),{orderId:u}=l.data.data;e({orderId:u}),console.log(l.data.data)}catch(r){throw e({error:v(r)}),r}finally{e({loading:!1})}},resendOtp:async()=>{e({loading:!0,error:null});try{const{phoneNumber:t,countryCode:r}=o(),n={countryCode:r,phoneNumber:t};await g.post("/otp-service/resend-otp-register",n)}catch(t){e({error:v(t)})}finally{e({loading:!1})}},verifyOtp:async t=>{e({loading:!0,error:null});try{const{phoneNumber:r,countryCode:n,orderId:l}=o();if(!l)throw new Error("Order ID is missing. Please request OTP again.");const u={countryCode:n,phoneNumber:r,otp:t,orderId:l},s=await g.post("/otp-service/verify-otp",u),{token:h}=s.data;return e({tempToken:h}),console.log(s.data.message),!0}catch(r){return e({error:v(r)}),b(),e({user:null}),!1}finally{e({loading:!1})}},createProfile:async t=>{e({loading:!0,error:null});try{const{tempToken:r}=o();if(!r)throw new Error("No token found. Please verify OTP first.");const n=await g.post("/profile/createProfile",t,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"multipart/form-data"}}),{businessName:l,buisnessEmail:u,logo:s}=n.data.data;return z(l,u,s),e({user:{...n.data.data,token:r},tempToken:null}),_({token:r}),!0}catch(r){return e({error:v(r)}),!1}finally{e({loading:!1})}},logout:()=>{b(),B(),e({user:null,tempToken:null,orderId:null})}}),F=(e,o)=>({countryCode:"+91",phoneNumber:"",user:N()||null,orderId:null,error:null,loading:!1,updatePhoneDetails:(t,r)=>e({countryCode:t,phoneNumber:r}),requestOtp:async()=>{e({loading:!0,error:null});try{const{countryCode:t,phoneNumber:r}=o(),n=await g.post("/doctors/login/send-otp",{countryCode:t,phoneNumber:r}),{orderId:l}=n.data.data;e({orderId:l})}catch(t){throw e({error:v(t)}),t}finally{e({loading:!1})}},userRequestOtp:async()=>{e({loading:!0,error:null});try{const{countryCode:t,phoneNumber:r}=o(),n=await g.post("/users/send-otp",{countryCode:t,phoneNumber:r}),{orderId:l}=n.data.data;e({orderId:l})}catch(t){throw e({error:v(t)}),t}finally{e({loading:!1})}},resendOtpLogin:async()=>{e({loading:!0,error:null});try{const{countryCode:t,phoneNumber:r}=o();await g.post("/auth/resendOTP",{countryCode:t,phoneNumber:r})}catch(t){e({error:v(t)})}finally{e({loading:!1})}},validateOtp:async t=>{e({loading:!0,error:null});try{const{countryCode:r,phoneNumber:n,orderId:l}=o();if(!l)throw new Error("Order ID is missing. Please request OTP again.");const u=await g.post("/doctors/login/verify-otp",{otp:t,countryCode:r,phoneNumber:n,orderId:l}),{token:s}=u.data.data;return console.log(s),_({token:s}),!0}catch(r){return e({error:v(r)}),b(),e({user:null,orderId:null}),!1}finally{e({loading:!1})}},userValidateOtp:async t=>{e({loading:!0,error:null});try{const{countryCode:r,phoneNumber:n,orderId:l}=o();if(!l)throw new Error("Order ID is missing. Please request OTP again.");const u=await g.post("/users/verify-otp",{otp:t,countryCode:r,phoneNumber:n,orderId:l}),{token:s}=u.data.data;return console.log(s),_({token:s}),!0}catch(r){return e({error:v(r)}),b(),e({user:null,orderId:null}),!1}finally{e({loading:!1})}},logout:()=>{b(),e({user:null,orderId:null,countryCode:"+91",phoneNumber:""})}}),W=U()(J((e,o,t)=>({...M(e,o),...F(e,o)}))),G="/assets/bgLogo-Ut4HqAQC.png";export{G as B,v as h,W as u};
