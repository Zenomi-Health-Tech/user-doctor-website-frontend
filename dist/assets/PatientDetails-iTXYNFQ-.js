import{m as p,r as i,j as e,a as f,b as u}from"./index-CJD_FPq6.js";const b=()=>{const{id:d}=p(),[t,o]=i.useState(null),[x,c]=i.useState(!0),[m,h]=i.useState(null);i.useEffect(()=>{(async()=>{c(!0);try{const a=f.get("auth");let r="";if(a)try{r=JSON.parse(a).token}catch{r=""}if(!d){console.error("Patient ID is missing."),c(!1);return}const l=await u.get(`/doctors/user?userId=${d}`,{headers:{Authorization:`Bearer ${r}`}});l.data.success?o(l.data.data):(console.error("Failed to fetch patient details:",l.data),o(null))}catch(a){console.error("Error fetching patient details:",a),o(null)}finally{c(!1)}})()},[d]);const n=s=>{const a={year:"numeric",month:"short",day:"numeric"};return new Date(s).toLocaleDateString(void 0,a)};return x?e.jsx("div",{className:"flex justify-center items-center h-screen text-xl",children:"Loading patient details..."}):t?e.jsxs("div",{className:"p-4 md:p-8 bg-[#FAF8FB] min-h-screen font-['Poppins']",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-8 shadow flex flex-col md:flex-row items-center md:items-start gap-6 border border-gray-100",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-[#8B2D6C1A] flex items-center justify-center text-[#8B2D6C] font-semibold text-4xl overflow-hidden border-4 border-[#8B2D6C]",children:t.profilePicture?e.jsx("img",{src:t.profilePicture,alt:t.name,className:"w-full h-full object-cover"}):t.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[#1A2343] mb-1",children:t.name}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-1 text-gray-700 text-base",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",t.email]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",t.countryCode," ",t.phoneNumber]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Gender:"})," ",t.gender]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"DOB:"})," ",n(t.dob)]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Created:"})," ",n(t.createdAt)]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Updated:"})," ",n(t.updatedAt)]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-8 shadow border border-gray-100",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h2",{className:"text-xl md:text-2xl font-semibold text-gray-800",children:["Total Assessments Cycles done ",e.jsxs("span",{className:"text-[#8B2D6C]",children:["(",t.tests.length,")"]})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-1",children:[t.tests.length===0&&e.jsx("div",{className:"text-gray-500",children:"No tests available."}),t.tests.map(s=>{const a=m===s.id;return e.jsxs("div",{className:"bg-[#FBF9FF] rounded-xl shadow-sm border border-[#E9D8F4]",children:[e.jsxs("button",{className:"w-full flex items-center justify-between px-5 py-4 focus:outline-none",onClick:()=>h(a?null:s.id),"aria-expanded":a,"aria-controls":`test-details-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"font-semibold text-[#8B2D6C] text-lg",children:["Cycle: ",s.cycle]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Tests Completed: ",s.testsCompleted]})]}),e.jsx("svg",{className:`w-5 h-5 text-[#8B2D6C] transform transition-transform duration-200 ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),a&&e.jsxs("div",{id:`test-details-${s.id}`,className:"px-5 pb-5 pt-2 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"mb-2 md:mb-0",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Created: ",n(s.createdAt)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Updated: ",n(s.updatedAt)]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-3",children:[s.reportView&&e.jsx("a",{href:s.reportView,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 rounded-full bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] text-white text-sm font-semibold shadow hover:opacity-90 transition",children:"View Report"}),s.detailedReportView&&e.jsx("a",{href:s.detailedReportView,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 rounded-full bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] text-white text-sm font-semibold shadow hover:opacity-90 transition",children:"View Detailed"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mt-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-700 mb-1",children:"Raw Scores:"}),e.jsx("ul",{className:"list-disc ml-6 text-sm text-gray-800",children:Object.entries(s.rawScores).map(([r,l])=>e.jsxs("li",{children:[r,": ",l]},r))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-700 mb-1",children:"Normalized Scores:"}),e.jsx("ul",{className:"list-disc ml-6 text-sm text-gray-800",children:Object.entries(s.normalizedScores).map(([r,l])=>e.jsxs("li",{children:[r,": ",l]},r))})]})]})]})]},s.id)})]})]}),t.isCourseAssigned&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Course Assigned"}),e.jsx("p",{className:"text-gray-700",children:"A course has been assigned to this patient."})]})]}):e.jsx("div",{className:"flex justify-center items-center h-screen text-xl text-red-600",children:"Patient not found or an error occurred."})};export{b as default};
