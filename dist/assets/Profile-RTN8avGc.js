import{r as o,u as S,f as B,a as L,j as e,b as f,c as m}from"./index-DGYvrIHG.js";function O(){const[u,g]=o.useState(),[d,b]=o.useState(null),[C,y]=o.useState(!0),{isDoctor:p}=S(),{toast:j}=B(),w=L(),[i,x]=o.useState(!1),[F,N]=o.useState(1);o.useEffect(()=>{(async()=>{y(!0);const a=f.get("auth");let s="";if(a)try{s=JSON.parse(a).token}catch{s=""}if(p){const r=await m.get("/doctors/profile",{headers:{Authorization:`Bearer ${s}`}});g(r.data.data)}else{const r=await m.get("/users/profile",{headers:{Authorization:`Bearer ${s}`}});r.data.data.dob&&typeof r.data.data.dob=="string"&&(r.data.data.dob=r.data.data.dob.split("T")[0]),b(r.data.data)}y(!1)})()},[]);const v=()=>{f.remove("auth"),w("/chooserole")},k=()=>x(!0),E=()=>x(!1),n=t=>{const{name:a,value:s}=t.target;g(r=>({...r,[a]:s}))},D=t=>{const{name:a,files:s}=t.target;s&&s[0]&&g(r=>({...r,[a]:s[0]}))},P=async()=>{try{const t=new FormData;Object.entries(u).forEach(([s,r])=>{Array.isArray(r)?t.append(s,JSON.stringify(r)):r instanceof File?t.append(s,r):s==="dob"?typeof r=="string"?t.append("dob",r.split("T")[0]):r instanceof Date?t.append("dob",r.toISOString().split("T")[0]):t.append("dob",""):t.append(s,r)});const a=await m.put("/doctors/profile",t,{headers:{"Content-Type":"multipart/form-data"}});a.data&&a.data.success&&(j({title:"Success",description:"Doctor Profile Editted!",variant:"default",className:"bg-green-500 text-white"}),window.location.reload()),x(!1)}catch{}},h=t=>{const{name:a,value:s}=t.target;b(r=>r&&{...r,[a]:s})},A=async()=>{if(d)try{const t=new FormData;Object.entries(d).forEach(([c,l])=>{c!=="dob"&&(Array.isArray(l)?t.append(c,JSON.stringify(l)):(l instanceof File||l!=null)&&t.append(c,l))});const a=f.get("auth");let s="";if(a)try{s=JSON.parse(a).token}catch{s=""}const r=await m.put("/users/profile",t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s}`}});r.data&&r.data.success&&(j({title:"Success",description:"User Profile Edited!",variant:"default",className:"bg-green-500 text-white"}),window.location.reload()),x(!1)}catch{}};if(C)return e.jsx("div",{className:"flex justify-center items-center min-h-screen ",children:e.jsx("div",{className:"text-xl",children:"Loading profile..."})});if(!u&&!d)return e.jsx("div",{className:"flex justify-center items-center min-h-screen ",children:e.jsx("div",{className:"text-xl text-red-500",children:"Profile not found."})});if(p){const t=u;return e.jsx("div",{className:"min-h-screen flex items-center justify-center font-['Poppins']",children:e.jsxs("div",{className:"w-full max-w-5xl min-h-[80vh] bg-white rounded-2xl shadow-lg flex overflow-hidden border border-[#F2EAF6]",children:[e.jsxs("aside",{className:"w-72 border-r border-[#F2EAF6] flex flex-col py-8 px-6",children:[e.jsx("div",{className:"text-xl font-semibold mb-8",children:"My profile"}),e.jsxs("nav",{className:"flex-1 flex flex-col gap-2",children:[e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg bg-[#F8F2F9] text-[#8B2D6C] font-medium border-l-4 border-[#8B2D6C]",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"Personal Information"]}),e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-[#F8F2F9] transition",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"About Us"]}),e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-[#F8F2F9] transition",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"Terms & Conditions"]}),e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-[#F8F2F9] transition",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"My plans"]}),e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-[#F8F2F9] transition",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"Privacy Policy"]}),e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-[#F8F2F9] transition",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"Report an issue"]})]}),e.jsxs("button",{onClick:v,className:"flex items-center gap-2 mt-8 text-[#E11D48] font-medium hover:underline",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"",children:e.jsx("path",{d:"M15 12l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1"})}),"Logout"]})]}),e.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center py-12 px-8",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[t.profilePicture?e.jsx("img",{src:typeof t.profilePicture=="string"?t.profilePicture:URL.createObjectURL(t.profilePicture),alt:t.name,className:"w-20 h-20 rounded-full object-cover bg-[#F8F2F9] mb-2"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] flex items-center justify-center text-white text-3xl font-bold mb-2",children:t.name.charAt(0)}),e.jsxs("div",{className:"text-2xl font-bold text-[#1A2343] mt-2",children:["Dr.",t.name]}),e.jsxs("div",{className:"text-gray-500 text-base",children:[t.countryCode," ",t.phoneNumber]})]}),e.jsxs("form",{className:"w-full max-w-lg flex flex-col gap-5",children:[F===1&&e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"rounded-lg px-4 py-3 bg-[#F8F2F9] text-gray-700 placeholder-gray-400 border-0",name:"name",value:t.name,onChange:n,placeholder:"Name*"}),e.jsx("input",{className:"rounded-lg px-4 py-3 bg-[#F8F2F9] text-gray-700 placeholder-gray-400 border-0",name:"email",value:t.email,onChange:n,placeholder:"Email Address*"}),e.jsxs("select",{className:"rounded-lg px-4 py-3 bg-[#F8F2F9] text-gray-700 border-0",name:"gender",value:t.gender,onChange:n,children:[e.jsx("option",{value:"",children:"Gender"}),e.jsx("option",{value:"MALE",children:"Male"}),e.jsx("option",{value:"FEMALE",children:"Female"}),e.jsx("option",{value:"OTHER",children:"Other"})]}),e.jsx("input",{className:"rounded-lg px-4 py-3 bg-[#F8F2F9] text-gray-700 placeholder-gray-400 border-0",name:"phoneNumber",value:t.phoneNumber,onChange:n,placeholder:"Phone Number*"}),e.jsx("input",{className:"rounded-lg px-4 py-3 bg-[#F8F2F9] text-gray-700 placeholder-gray-400 border-0",name:"dob",type:"date",value:t.createdAt?t.createdAt.split("T")[0]:"",onChange:n,placeholder:"Date of Birth*"}),e.jsx("input",{className:"rounded-lg px-4 py-3 bg-[#F8F2F9] text-gray-700 placeholder-gray-400 border-0",name:"govtIdUrl",type:"file",onChange:D,placeholder:"Government ID"}),e.jsx("button",{type:"button",onClick:()=>N(2),className:"w-full mt-4 py-3 rounded-full text-white font-semibold text-lg shadow",style:{background:"linear-gradient(89.79deg, #704180 5.07%, #8B2D6C 95.83%)"},children:"Next"})]}),F===2&&e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"rounded-lg px-4 py-3 bg-[#F8F2F9] text-gray-700 placeholder-gray-400 border-0",name:"qualification",value:t.qualification,onChange:n,placeholder:"Qualification*"}),e.jsx("input",{className:"rounded-lg px-4 py-3 bg-[#F8F2F9] text-gray-700 placeholder-gray-400 border-0",name:"specialization",value:t.specialization,onChange:n,placeholder:"Specialization*"}),e.jsx("input",{className:"rounded-lg px-4 py-3 bg-[#F8F2F9] text-gray-700 placeholder-gray-400 border-0",name:"medicalLicenseNumber",value:t.medicalLicenseNumber,onChange:n,placeholder:"Medical License Number*"}),e.jsx("input",{className:"rounded-lg px-4 py-3 bg-[#F8F2F9] text-gray-700 placeholder-gray-400 border-0",name:"experience",value:t.experience.toString(),onChange:n,placeholder:"Experience*"}),e.jsx("input",{className:"rounded-lg px-4 py-3 bg-[#F8F2F9] text-gray-700 placeholder-gray-400 border-0",name:"consultationFee",value:t.consultationFee.toString(),onChange:n,placeholder:"Consultation Fee*"}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{type:"button",onClick:()=>N(1),className:"btn-secondary",children:"Back"}),e.jsx("button",{type:"button",onClick:P,className:"flex-1 py-3 rounded-full bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] text-white font-semibold text-lg shadow hover:opacity-90 transition",children:"Edit Profile"})]})]})]})]})]})})}else if(!p){const t=d;return e.jsx("div",{className:"min-h-screen  flex items-center justify-center font-['Poppins']",children:e.jsxs("div",{className:"w-full max-w-5xl min-h-[80vh] bg-white rounded-2xl shadow-lg flex overflow-hidden border border-[#F2EAF6]",children:[e.jsxs("aside",{className:"w-72 border-r border-[#F2EAF6] flex flex-col py-8 px-6",children:[e.jsx("div",{className:"text-xl font-semibold mb-8",children:"My profile"}),e.jsxs("nav",{className:"flex-1 flex flex-col gap-2",children:[e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg bg-[#F8F2F9] text-[#8B2D6C] font-medium border-l-4 border-[#8B2D6C]",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"Personal Information"]}),e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-[#F8F2F9] transition",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"About Us"]}),e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-[#F8F2F9] transition",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"Terms & Conditions"]}),e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-[#F8F2F9] transition",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"My plans"]}),e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-[#F8F2F9] transition",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"Privacy Policy"]}),e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-[#F8F2F9] transition",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"mr-2",children:e.jsx("circle",{cx:"10",cy:"10",r:"8"})}),"Report an issue"]})]}),e.jsxs("button",{onClick:v,className:"flex items-center gap-2 mt-8 text-[#E11D48] font-medium hover:underline",children:[e.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"",children:e.jsx("path",{d:"M15 12l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1"})}),"Logout"]})]}),e.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center py-12 px-8",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[t.profilePicture?e.jsx("img",{src:typeof t.profilePicture=="string"?t.profilePicture:t.profilePicture?URL.createObjectURL(t.profilePicture):void 0,alt:t.name,className:"w-20 h-20 rounded-full object-cover bg-[#F8F2F9] mb-2"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] flex items-center justify-center text-white text-3xl font-bold mb-2",children:t.name.charAt(0)}),e.jsx("div",{className:"text-2xl font-bold text-[#1A2343]",children:t.name}),e.jsxs("div",{className:"text-gray-500 text-base",children:[t.countryCode," ",t.phoneNumber]})]}),e.jsxs("form",{className:"w-full max-w-lg flex flex-col gap-5",children:[e.jsx("input",{className:"w-full  rounded-lg px-4 py-3 text-gray-700 placeholder-gray-400 border-0 focus:ring-2 focus:ring-[#8B2D6C] focus:outline-none",name:"name",value:t.name,onChange:h,placeholder:"Name*",readOnly:!i}),e.jsx("input",{className:"w-full  rounded-lg px-4 py-3 text-gray-700 placeholder-gray-400 border-0 focus:ring-2 focus:ring-[#8B2D6C] focus:outline-none",name:"email",value:t.email,onChange:h,placeholder:"Email Address*",readOnly:!i}),e.jsxs("select",{className:"w-full  rounded-lg px-4 py-3 text-gray-700 placeholder-gray-400 border-0 focus:ring-2 focus:ring-[#8B2D6C] focus:outline-none appearance-none",name:"gender",value:t.gender,onChange:h,disabled:!i,children:[e.jsx("option",{value:"",children:"Gender"}),e.jsx("option",{value:"MALE",children:"Male"}),e.jsx("option",{value:"FEMALE",children:"Female"}),e.jsx("option",{value:"OTHER",children:"Other"})]}),e.jsx("input",{className:"w-full  rounded-lg px-4 py-3 text-gray-700 placeholder-gray-400 border-0 focus:ring-2 focus:ring-[#8B2D6C] focus:outline-none",name:"phoneNumber",value:t.phoneNumber,onChange:h,placeholder:"Phone Number*",readOnly:!i}),i?e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("button",{type:"button",onClick:A,className:"flex-1 py-3 rounded-full bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] text-white font-semibold text-lg shadow hover:opacity-90 transition",children:"Save"}),e.jsx("button",{type:"button",onClick:E,className:"flex-1 py-3 rounded-full bg-gray-200 text-gray-700 font-semibold text-lg shadow hover:bg-gray-300 transition",children:"Cancel"})]}):e.jsx("button",{type:"button",onClick:k,className:"w-full mt-4 py-3 rounded-full bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] text-white font-semibold text-lg shadow hover:opacity-90 transition",children:"Edit Profile"})]})]})]})})}}const W=()=>e.jsx(O,{});export{W as default};
