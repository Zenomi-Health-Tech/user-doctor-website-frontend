import{r as m,f as R,a as B,j as e,B as y,d as M}from"./index-CGTLm9hM.js";import{u as A,b as j,L as O,t as T,z as a,C as $}from"./index-BT4QEcWP.js";import{B as V,L as G}from"./BackgroundImage-Yw8SgEDY.js";import{P as W}from"./style-BW9zFFT7.js";const H=a.object({name:a.string().min(1,"Name is required"),email:a.string().email("Invalid email address"),phoneNumber:a.string().min(10,"Phone number must be at least 10 digits"),gender:a.enum(["MALE","FEMALE","OTHER"]),qualification:a.string().min(1,"Qualification is required"),additionalQualifications:a.array(a.string()),workLocation:a.string().min(1,"Work location is required"),specialization:a.string().min(1,"Specialization is required"),medicalLicenseNumber:a.string().min(1,"Medical license number is required"),experience:a.string().min(1,"Experience is required"),consultationFee:a.string().min(1,"Consultation fee is required"),doctorPhoto:a.any().optional(),medicalLicense:a.any().optional(),govtId:a.any().optional()}),u=["Personal Information","Professional Information","Practice & Fees"],J=()=>{var L;const[N,v]=m.useState(!1),{toast:x}=R(),[S,E]=m.useState("+91"),I=B(),[r,w]=m.useState(0),{register:o,handleSubmit:P,setValue:p,getValues:c,trigger:g,control:f,formState:{errors:i}}=A({resolver:T(H),shouldUnregister:!1}),[h,C]=m.useState(""),F=(t,s)=>{if(!s.dialCode){x({title:"Error",description:"Invalid country code.",variant:"destructive"});return}const n=t.replace(s.dialCode,""),l=`+${s.dialCode}`;E(l),p("phoneNumber",n)},Q=async t=>{var s,n;v(!0);try{const l=new FormData;Object.entries(t).forEach(([b,k])=>{b==="additionalQualifications"?l.append(b,JSON.stringify(k)):l.append(b,k.toString())}),t.doctorPhoto&&l.append("doctorPhoto",t.doctorPhoto),t.medicalLicense&&l.append("medicalLicense",t.medicalLicense),t.govtId&&l.append("govtId",t.govtId),l.append("countryCode",S);const d=await M.post("http://ec2-3-109-123-74.ap-south-1.compute.amazonaws.com:3000/api/v1/doctors/register",l,{headers:{"Content-Type":"multipart/form-data"}});x({title:"Success",description:"Registration successful!",variant:"default",className:"bg-green-500 text-white"}),d.status===201&&I("/doctor/login")}catch(l){const d=((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Registration failed";x({title:"Error",description:d,variant:"destructive"})}finally{v(!1)}},q=async()=>{let t=!1;r===0?(t=await g(["name","email","gender","phoneNumber"]),console.log("Step 0 valid:",t,c())):r===1?(t=await g(["qualification","additionalQualifications","specialization","experience"]),console.log("Step 1 valid:",t,c())):r===2&&(t=await g(["workLocation","consultationFee"]),console.log("Step 2 valid:",t,c())),t&&w(s=>s+1)},z=()=>w(t=>t-1),D=(r+1)/u.length*100;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:u.map((t,s)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:`rounded-full w-8 h-8 flex items-center justify-center text-white font-bold ${r===s?"bg-[#704180]":"bg-gray-300"}`,children:s+1}),e.jsx("span",{className:`mt-2 text-xs font-medium ${r===s?"text-[#704180]":"text-gray-500"}`,children:t})]},t))}),e.jsx("div",{className:"w-full h-1 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-1 bg-[#704180] rounded-full transition-all duration-300",style:{width:`${D}%`}})})]}),e.jsxs("form",{onSubmit:P(Q),className:"w-full space-y-4 font-['Poppins']",children:[r===0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{...o("name"),type:"text",placeholder:"Full Name*",className:"w-full p-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 bg-gray-50",style:{"--tw-ring-color":"#704180"}}),i.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.name.message})]}),e.jsxs("div",{children:[e.jsx("input",{...o("email"),type:"email",placeholder:"Email Address*",className:"w-full p-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 bg-gray-50",style:{"--tw-ring-color":"#704180"}}),i.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.email.message})]}),e.jsxs("div",{children:[e.jsxs("select",{...o("gender"),className:"w-full p-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 bg-gray-50",style:{"--tw-ring-color":"#704180"},children:[e.jsx("option",{value:"",children:"Gender*"}),e.jsx("option",{value:"MALE",children:"Male"}),e.jsx("option",{value:"FEMALE",children:"Female"}),e.jsx("option",{value:"OTHER",children:"Other"})]}),i.gender&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.gender.message})]}),e.jsxs("div",{children:[e.jsx(W,{country:"in",onlyCountries:["in"],onChange:F,inputStyle:{width:"100%",height:"48px",fontSize:"16px",borderRadius:"12px",border:"1px solid #e2e8f0",backgroundColor:"#f9fafb"},containerStyle:{width:"100%"},buttonStyle:{borderRadius:"12px 0 0 12px",border:"1px solid #e2e8f0"}}),i.phoneNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.phoneNumber.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor Photo*"}),e.jsx(j,{control:f,name:"doctorPhoto",render:({field:t})=>e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{var n;return t.onChange(((n=s.target.files)==null?void 0:n[0])||null)},className:"w-full p-2 border border-gray-200 rounded-xl bg-gray-50"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Govt Issued ID*"}),e.jsx(j,{control:f,name:"govtId",render:({field:t})=>e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:s=>{var n;return t.onChange(((n=s.target.files)==null?void 0:n[0])||null)},className:"w-full p-2 border border-gray-200 rounded-xl bg-gray-50"})})]})]}),r===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{...o("qualification"),type:"text",placeholder:"Qualification*",className:"w-full p-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 bg-gray-50",style:{"--tw-ring-color":"#704180"}}),i.qualification&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.qualification.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Qualifications*"}),e.jsx("div",{className:"flex gap-2 flex-wrap mb-2",children:(L=c("additionalQualifications"))==null?void 0:L.map((t,s)=>e.jsxs("span",{className:"bg-[#704180] text-white px-2 py-1 rounded-full flex items-center",children:[t,e.jsx("button",{type:"button",className:"ml-2 text-xs",onClick:()=>{const n=c("additionalQualifications").filter((l,d)=>d!==s);p("additionalQualifications",n,{shouldValidate:!0})},children:"Ã—"})]},s))}),e.jsx("input",{type:"text",value:h,onChange:t=>C(t.target.value),onKeyDown:t=>{if((t.key==="Enter"||t.key===",")&&h.trim()){t.preventDefault();const s=[...c("additionalQualifications")||[],h.trim()];p("additionalQualifications",s,{shouldValidate:!0}),C("")}},placeholder:"Type and press Enter or comma",className:"w-full p-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 bg-gray-50",style:{"--tw-ring-color":"#704180"}}),i.additionalQualifications&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.additionalQualifications.message})]}),e.jsxs("div",{children:[e.jsx("input",{...o("specialization"),type:"text",placeholder:"Area of Specialization*",className:"w-full p-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 bg-gray-50",style:{"--tw-ring-color":"#704180"}}),i.specialization&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.specialization.message})]}),e.jsxs("div",{children:[e.jsx("input",{...o("experience"),type:"number",placeholder:"Experience*",className:"w-full p-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 bg-gray-50",style:{"--tw-ring-color":"#704180"}}),i.experience&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.experience.message})]}),e.jsxs("div",{children:[e.jsx("input",{...o("medicalLicenseNumber"),type:"text",placeholder:"Medical License Number*",className:"w-full p-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 bg-gray-50",style:{"--tw-ring-color":"#704180"}}),i.medicalLicenseNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.medicalLicenseNumber.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medical License Document*"}),e.jsx(j,{control:f,name:"medicalLicense",render:({field:t})=>e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:s=>{var n;return t.onChange(((n=s.target.files)==null?void 0:n[0])||null)},className:"w-full p-2 border border-gray-200 rounded-xl bg-gray-50"})})]})]}),r===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{...o("workLocation"),type:"text",placeholder:"Work Location*",className:"w-full p-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 bg-gray-50",style:{"--tw-ring-color":"#704180"}}),i.workLocation&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.workLocation.message})]}),e.jsxs("div",{children:[e.jsx("input",{...o("consultationFee"),type:"number",placeholder:"Consultation Fee*",className:"w-full p-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 bg-gray-50",style:{"--tw-ring-color":"#704180"}}),i.consultationFee&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.consultationFee.message})]})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[r>0&&e.jsx(y,{type:"button",onClick:z,className:"rounded-xl px-8 py-3 bg-gray-200 text-white font-medium",children:"Back"}),r<u.length-1&&e.jsx(y,{type:"button",onClick:q,className:"rounded-xl px-8 py-3 bg-gradient-to-r from-[#704180] to-[#8B2D6C] text-white font-medium ml-auto",children:"Next"}),r===u.length-1&&e.jsx(y,{type:"submit",disabled:N,className:"rounded-xl px-8 py-3 bg-gradient-to-r from-[#704180] to-[#8B2D6C] text-white font-medium ml-auto",children:N?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(O,{className:"animate-spin h-5 w-5 mr-2"}),e.jsx("span",{children:"Registering..."})]}):"Register"})]})]})]})};function Y(){return e.jsxs("div",{className:"flex items-center justify-center min-h-screen relative",style:{backgroundImage:`url(${V})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(89.79deg, #704180 5.07%, #8B2D6C 95.83%)",opacity:.9}}),e.jsx("div",{className:"container mx-auto px-4 z-10",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-center",children:[e.jsx("div",{className:"w-full lg:w-1/2 text-white p-8 rounded-3xl",style:{background:"linear-gradient(89.79deg, #704180 5.07%, #8B2D6C 95.83%)"},children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("img",{src:G,alt:"Logo",className:"w-[160px] h-[163px] mb-8",loading:"lazy"}),e.jsx("h1",{className:"text-4xl font-semibold mb-4",children:"Welcome, Lily!"}),e.jsx("p",{className:"text-lg opacity-90",children:"Let's take your first step toward better mental and physical wellness."})]})}),e.jsx("div",{className:"w-full lg:w-1/2",children:e.jsx($,{className:"bg-white/95 backdrop-blur-sm rounded-3xl p-8 shadow-xl",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-2",children:["Register as ",e.jsx("span",{style:{color:"#704180"},children:"Doctor"})]}),e.jsx("div",{className:"w-full mt-6",children:e.jsx(J,{})})]})})})]})})]})}export{Y as default};
