import{r as l,a as R,j as e,S as D,b as c,c as d}from"./index-9IGzMayQ.js";import{S as A,A as g}from"./sliders-horizontal-B2Fr5wiF.js";const U="/assets/mobileTouchRefer-GvEUkM3T.svg",z="data:image/svg+xml,%3csvg%20width='250'%20height='219'%20viewBox='0%200%20250%20219'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='125.271'%20cy='111.697'%20r='124.676'%20fill='black'%20fill-opacity='0.2'/%3e%3ccircle%20cx='125.271'%20cy='111.697'%20r='95.281'%20fill='%238B2D6C'/%3e%3c/svg%3e",E="/assets/bgPlans-CUqwuWfU.png",L=()=>{const[j,v]=l.useState([]),[y,h]=l.useState(!0),[n,N]=l.useState(""),[m,u]=l.useState(0),f=5,C=R(),[k,P]=l.useState(!1),[F,p]=l.useState([]);l.useEffect(()=>{const t=async()=>{h(!0);try{const s=c.get("auth");let a="";if(s)try{a=JSON.parse(s).token}catch{a=""}const r=await d.get("/doctors/referred-patients",{headers:{Authorization:`Bearer ${a}`}});r.data.success?v(r.data.data):console.error("Failed to fetch referred patients:",r.data)}catch(s){console.error("Error fetching referred patients:",s)}finally{h(!1)}},i=async()=>{try{const s=c.get("auth");let a="";if(s)try{a=JSON.parse(s).token}catch{a=""}const r=await d.get("/doctors/profile",{headers:{Authorization:`Bearer ${a}`}});r.data&&r.data.data&&u(r.data.data.freeReferralsGenerated||0)}catch{u(0)}},o=async()=>{try{const s=c.get("auth");let a="";if(s)try{a=JSON.parse(s).token}catch{a=""}const r=await d.get("/doctors/referral-code",{headers:{Authorization:`Bearer ${a}`}});r.data&&r.data.data&&p(r.data.data)}catch{p([])}};t(),i(),o()},[]);const S=()=>{P(!0)},x=async t=>{try{const i=c.get("auth");let o="";if(i)try{o=JSON.parse(i).token}catch{o=""}let s="";t==="starter"?s="/stripe/create-referral-checkout":t==="referral"?s="/stripe/create-doctor-checkout":t==="pro"&&(s="/stripe/create-enterprise-checkout");const a=await d.post(s,{amount:t==="starter"?1e3:t==="referral"?1e4:5e4},{headers:{Authorization:`Bearer ${o}`}});a.data&&a.data.url&&(window.location.href=a.data.url)}catch{alert("Failed to generate checkout.")}},B=j.filter(t=>t.name.toLowerCase().includes(n.toLowerCase()));console.log(B);const b=F.filter(t=>!n||t.isUsed&&t.user&&t.user.name.toLowerCase().includes(n.toLowerCase()));return y?e.jsx("div",{className:"flex justify-center items-center h-screen text-xl",children:"Loading referred patients..."}):k?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center font-['Poppins'] relative w-full",style:{position:"relative"},children:[e.jsx("div",{className:"absolute inset-0 w-full h-full z-0",style:{backgroundImage:`url(${E})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"brightness(0.7)"}}),e.jsxs("div",{className:"flex gap-8 overflow-x-auto scroll-smooth snap-x snap-mandatory pb-8 w-full md:justify-center md:gap-8 md:overflow-x-visible",children:[e.jsxs("div",{className:"min-w-[320px] max-w-xs bg-white/10 rounded-3xl flex flex-col items-center snap-center shadow-lg border border-white/20 backdrop-blur-md transition-all duration-300 hover:scale-105 hover:border-[#F6C851] hover:shadow-2xl cursor-pointer p-8 h-[420px] justify-between",tabIndex:0,children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xl font-bold mb-2 text-white",children:"Starter Plan"}),e.jsx("div",{className:"text-4xl font-bold text-white mb-1",children:"1k"}),e.jsx("div",{className:"text-white/80 mb-4 text-sm",children:"/per patient after 5 referral used"}),e.jsxs("ul",{className:"text-white/90 text-left mb-6 space-y-2 w-full",children:[e.jsx("li",{children:"✔️ Includes 5 free patients"}),e.jsx("li",{children:"✔️ Ideal for independent professionals"}),e.jsx("li",{children:"✔️ Scale as needed"}),e.jsx("li",{children:"✔️ Personalized training"})]})]}),e.jsx("button",{className:"w-full py-3 rounded-full bg-gradient-to-r from-[#704180] to-[#8B2D6C] text-white font-semibold shadow hover:opacity-90 transition mt-auto",onClick:()=>x("starter"),children:"Pay for plan"})]}),e.jsxs("div",{className:"min-w-[320px] max-w-xs bg-white/10 rounded-3xl flex flex-col items-center snap-center shadow-lg border border-white/20 backdrop-blur-md transition-all duration-300 hover:scale-105 hover:border-[#F6C851] hover:shadow-2xl cursor-pointer p-8 h-[420px] justify-between",tabIndex:0,children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-2xl font-bold mb-2 text-white",children:"Referral Plan"}),e.jsx("div",{className:"text-5xl font-bold text-white mb-1",children:"10k"}),e.jsx("div",{className:"text-white/80 mb-4 text-lg",children:"/onetime"}),e.jsxs("ul",{className:"text-white/90 text-left mb-6 space-y-2 w-full",children:[e.jsx("li",{children:"✔️ Covers initial setup"}),e.jsx("li",{children:"✔️ System integration"}),e.jsx("li",{children:"✔️ Personalized onboarding"}),e.jsx("li",{children:"✔️ Personalized training"})]})]}),e.jsx("button",{className:"w-full py-4 rounded-full bg-white text-[#8B2D6C] font-semibold text-lg shadow hover:bg-[#F3EAF7] transition mt-auto",onClick:()=>x("referral"),children:"Pay for plan"})]}),e.jsxs("div",{className:"min-w-[320px] max-w-xs bg-white/10 rounded-3xl flex flex-col items-center snap-center shadow-lg border border-white/20 backdrop-blur-md transition-all duration-300 hover:scale-105 hover:border-[#F6C851] hover:shadow-2xl cursor-pointer p-8 h-[420px] justify-between",tabIndex:0,children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xl font-bold mb-2 text-white",children:"Pro Plan"}),e.jsx("div",{className:"text-4xl font-bold text-white mb-1",children:"50k"}),e.jsx("div",{className:"text-white/80 mb-4 text-sm",children:"/onetime"}),e.jsxs("ul",{className:"text-white/90 text-left mb-6 space-y-2 w-full",children:[e.jsx("li",{children:"✔️ Tailored for clinics/hospitals"}),e.jsx("li",{children:"✔️ High-capacity features + analytics"}),e.jsx("li",{children:"✔️ Multi-location / team access"})]})]}),e.jsx("button",{className:"w-full py-3 rounded-full bg-gradient-to-r from-[#704180] to-[#8B2D6C] text-white font-semibold shadow hover:opacity-90 transition mt-auto",onClick:()=>x("pro"),children:"Pay for plan"})]})]}),e.jsxs("div",{className:"flex justify-center gap-3 mt-4",children:[e.jsx("span",{className:"w-8 h-3 rounded-full bg-[#F6C851] inline-block"}),e.jsx("span",{className:"w-3 h-3 rounded-full bg-white/70 inline-block"}),e.jsx("span",{className:"w-3 h-3 rounded-full bg-white/70 inline-block"})]})]}):e.jsxs("div",{className:"p-8 min-h-screen font-['Poppins'] bg-[#FAF8FC]",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-800 mb-4 md:mb-0",children:"Referral patients"}),e.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 max-w-xs",children:[e.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search your patients here",className:"w-full py-3 pl-10 pr-4 rounded-full bg-[#F5F3F7] border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#8B2D6C] text-base",value:n,onChange:t=>N(t.target.value)})]}),e.jsx("button",{className:"p-3 rounded-full bg-[#F5F3F7] border border-gray-200 shadow-sm",children:e.jsx(A,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"bg-[#8B2D6C] rounded-2xl p-8 flex flex-col md:flex-row items-center justify-between mb-8 relative overflow-hidden",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white text-2xl font-bold mb-2",children:"Get 5 FREE referrals free"}),e.jsx("div",{className:"w-full h-4 bg-[#E6A94A]/40 rounded-full mb-2 mt-4",children:e.jsx("div",{className:"h-4 rounded-full bg-[#F6C851]",style:{width:`${Math.min(m/f*100,100)}%`}})}),e.jsxs("div",{className:"text-white text-base mb-4",children:[m," out of ",f," people referred"]}),e.jsxs("button",{onClick:S,className:"px-6 py-2 cursor-pointer rounded-full bg-[#FCB35B] text-[#8B2D6C] font-semibold shadow hover:opacity-90 transition text-base flex items-center gap-2",children:["Upgrade now ",e.jsx(g,{className:"w-5 h-5"})]})]}),e.jsxs("div",{className:"hidden md:block flex-shrink-0 ml-8 relative",style:{width:180,height:120},children:[e.jsx("img",{src:z,alt:"",className:"w-32 h-54"}),e.jsx("img",{src:U,alt:"Referral Illustration",className:"absolute top-1/2 left-1/2 w-32 h-32 -translate-x-1/2 -translate-y-1/2 object-contain"})]})]}),e.jsx("div",{className:"space-y-4",children:b.length>0?b.map(t=>e.jsxs("div",{className:"bg-white rounded-2xl px-6 py-4 flex items-center justify-between shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200",style:{cursor:t.isUsed&&t.user?"pointer":"default"},onClick:()=>t.isUsed&&t.user?C(`/patients/${t.user.id}`):void 0,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[t.isUsed&&t.user&&t.user.profilePicture?e.jsx("img",{src:t.user.profilePicture,alt:t.user.name,className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#8B2D6C1A] flex items-center justify-center text-[#8B2D6C] font-semibold text-lg",children:t.isUsed&&t.user&&t.user.name?t.user.name.charAt(0).toUpperCase():t.referralCode.slice(-2)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800 text-lg",children:t.isUsed&&t.user&&t.user.name?t.user.name:"Unclaimed"}),e.jsx("p",{className:"text-sm text-gray-500",children:t.isUsed&&t.user&&t.user.claimedAt?`Joined on ${new Date(t.user.claimedAt).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}`:"Not yet claimed"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("span",{className:"text-[#8B2D6C] font-medium text-base",children:["Referral code - ",t.referralCode]}),e.jsx("button",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-[#8B2D6C1A] hover:bg-[#8B2D6C]/10 transition",children:e.jsx(g,{className:"w-6 h-6 text-[#8B2D6C]"})})]})]},t.id)):e.jsx("div",{className:"text-center text-gray-500 text-lg mt-10",children:"No referred patients found."})})]})};export{L as default};
