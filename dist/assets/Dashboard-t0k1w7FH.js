import{r as n,u as fe,a as pe,j as e,b as B,c as $,d as v}from"./index-1Hvr9aaJ.js";import{t as ge}from"./topResultImage-CLm_SyvL.js";const be="/assets/user-tick-BGf2NAhT.png",we="/assets/yellowcal-B0IebFgv.png",je="/assets/purplecal-BatwHKTq.png",ye="/assets/greencal-CWWh9JF6.png",Ne="/assets/PeopleTest-BOfhdpfX.svg";function ve(){var V,Y;const[o,C]=n.useState([]),[G,S]=n.useState(!0),[c,b]=n.useState(null),[y,I]=n.useState(null),[P,T]=n.useState(!1),[u,K]=n.useState([]),[X,M]=n.useState(!1),[a,k]=n.useState(0),[x,R]=n.useState([]),[Z,F]=n.useState(!1),[w,ee]=n.useState(null),{isDoctor:h,isPaid:te,userName:q}=fe(),[Q,z]=n.useState([]),[se,U]=n.useState(!0),f=pe(),[W,le]=n.useState([]),[_]=n.useState(!1),[j,A]=n.useState(!1),[ae,H]=n.useState(0);console.log(h,"isDoctor");const[ne,re]=n.useState(null);n.useEffect(()=>{(async()=>{var s,r,l;S(!0);try{const i=B.get("auth");let g="";if(i)try{g=JSON.parse(i).token}catch{g=""}if(console.log("isDoctor value:",h),console.log("Token:",g),h){console.log("Attempting to fetch doctor analytics...");try{const d=await $.get("/doctors/analytics/home",{headers:{Authorization:`Bearer ${g}`}});console.log("Doctor analytics response:",d),console.log("Response data:",d.data),ee(d.data.data)}catch(d){console.error("Error fetching doctor analytics:",d),v.isAxiosError(d)&&console.error("Axios error details:",{status:(s=d.response)==null?void 0:s.status,data:(r=d.response)==null?void 0:r.data,headers:(l=d.response)==null?void 0:l.headers})}}else{const d=await v.get("https://zenomiai.elitceler.com/api/testnames",{headers:{Authorization:`Bearer ${g}`}});console.log("API Response:",d.data),Array.isArray(d.data)?C(d.data):(console.error("Unexpected API response format:",d.data),C([]))}}catch(i){console.error("Error in fetchData:",i),C([])}finally{S(!1)}})()},[h]),n.useEffect(()=>{(async()=>{U(!0);try{const s=await $.get("/admin/get-todays-appointments");s.data.success?z(s.data.data):z([])}catch{z([])}finally{U(!1)}})()},[]),n.useEffect(()=>{h||(async()=>{const s=B.get("auth");let r="";if(s)try{r=JSON.parse(s).token}catch{r=""}const l=await $.get("/users/get-all-courses",{headers:{Authorization:`Bearer ${r}`}});l.data&&l.data.success&&le(l.data.data)})()},[h]);const p=((V=o==null?void 0:o.filter(t=>(t==null?void 0:t.testStatus)==="COMPLETED"))==null?void 0:V.length)||0;console.log(p);const oe=async()=>{if(c){M(!0);try{const t=B.get("auth");let s="";if(t)try{s=JSON.parse(t).token}catch{s=""}const r=await v.get(`https://zenomiai.elitceler.com/api/questions/${c.id}`,{headers:{Authorization:`Bearer ${s}`}});console.log(r.data,"res of questions"),r.data&&Array.isArray(r.data)?(K(r.data),I(c.id),T(!0),k(0),R([]),b(null)):(console.error("Invalid questions data format:",r.data),alert("Failed to load questions. Please try again."))}catch(t){console.error("Failed to fetch questions:",t),alert("Failed to load questions. Please try again.")}finally{M(!1)}}},D=t=>{const s=u[a],r=[...x];r.length<=a&&(r.length=a+1);let l=t;s.questionType==="SCALE"?l=t.split(":")[0]:Array.isArray(t)&&(l=t[0]),r[a]={question:s.question,answer:l},R(r),(s.questionType==="BOOLEAN"||s.questionType==="SCALE")&&a<u.length-1?setTimeout(()=>{k(i=>i+1)},200):(s.questionType==="BOOLEAN"||s.questionType==="SCALE")&&a===u.length-1&&setTimeout(()=>{J()},200)},ie=()=>{if(a<u.length-1){if(!x[a]||!x[a].answer){alert("Please answer the current question before proceeding.");return}k(a+1)}else{if(!x[a]||!x[a].answer){alert("Please answer the last question before submitting.");return}J()}},ce=()=>{a>0&&k(a-1)},de=()=>{T(!1),F(!1),b(null),window.location.reload()},J=async()=>{var r,l;if(!y)return;const t=B.get("auth");let s="";if(t)try{s=JSON.parse(t).token}catch{s=""}A(!0),T(!1);try{const i=o.find(m=>m.id===y),g=i&&(((r=i.name)==null?void 0:r.toUpperCase().includes("PHQ"))||((l=i.name)==null?void 0:l.toUpperCase().includes("GAD")));console.log("Submitting quiz:",{answers:x,questions:u});const d=x.map((m,he)=>{const E=u[he];if(E&&E.questionType==="SCALE"&&typeof m.answer=="string")if(g&&Array.isArray(E.scaleOptions)){const N=E.scaleOptions.findIndex(O=>O===m.answer);if(N===-1)throw alert("Please answer all questions before submitting."),new Error("Invalid answer for PHQ/GAD: "+m.answer);return{question:m.question,answer:String(N)}}else{const N=m.answer.split(":"),O=N.length>1?N[1]:m.answer;return{question:m.question,answer:O}}return{question:m.question,answer:m.answer}});await v.post(`https://zenomiai.elitceler.com/api/score-test/${y}`,{answers:d},{headers:{Authorization:`Bearer ${s}`}});const L=o.find(m=>m.id===y);re((L==null?void 0:L.name)||null),F(!0);const ue=await v.get("https://zenomiai.elitceler.com/api/testnames",{headers:{Authorization:`Bearer ${s}`}});C(ue.data),I(null),A(!1)}catch(i){console.error("Failed to submit quiz:",i),alert("Failed to submit quiz. Please try again."),A(!1)}finally{S(!1)}};console.log(c==null?void 0:c.id);const xe=t=>{f(`/patients/${t}`)};if(n.useEffect(()=>{j&&H(30)},[j]),n.useEffect(()=>{let t=null;return j&&(t=setInterval(()=>{H(s=>s<=1?(A(!1),0):s-1)},1e3)),()=>{t&&clearInterval(t)}},[j]),n.useEffect(()=>{h&&te===!1&&location.pathname!=="/doctor/payment-onboard"&&f("/doctor/payment-onboard",{replace:!0})},[]),G)return e.jsx("div",{children:"Loading..."});if(!Array.isArray(o)&&!h)return console.error("Tests is not an array:",o),e.jsx("div",{children:"Error loading tests. Please try again."});console.log(w,"doctorAnalytics");const me=["Start Your Daily Mental Health Check-In","Review Your Recent Test Results","Talk to a Mental Health Expert"];return e.jsxs("div",{className:"relative w-full h-full",children:[(c||P)&&e.jsx("div",{className:"fixed inset-0 z-40 backdrop-blur-md bg-black bg-opacity-20 transition-all duration-300"}),e.jsx("div",{className:c||P?"relative z-30 pointer-events-none select-none":"relative z-10",children:e.jsx("div",{className:"flex flex-col lg:flex-row justify-center gap-4 lg:gap-8 p-2 sm:p-4 md:p-8 min-h-screen font-['Poppins'] w-full overflow-x-hidden",children:h?e.jsxs("div",{className:"w-full font-['Poppins']",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-6 font-['Urbanist']",children:[e.jsx("span",{role:"img","aria-label":"wave",children:"ðŸ‘‹"})," ","Hey Dr. ",q||"Joseph"]}),w&&e.jsxs("div",{className:"grid grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-[#8B2D6C05] rounded-2xl p-6 flex flex-col items-center justify-center shadow cursor-pointer",onClick:()=>f("/patients"),children:[e.jsx("img",{src:be,alt:"Patients",className:"w-12 h-12 mb-2"}),e.jsx("span",{className:"text-2xl font-medium text-[#5E5F60]",children:w.totalReferredPatients}),e.jsx("p",{className:"text-gray-600 text-md",children:"Total patients"})]}),e.jsxs("div",{className:"bg-[#FBF9FF] rounded-2xl p-6 flex flex-col items-center justify-center shadow cursor-pointer",onClick:()=>f("/results"),children:[e.jsx("img",{src:je,alt:"Reports",className:"w-12 h-12 mb-2"}),e.jsx("span",{className:"text-2xl font-medium text-[#5E5F60]",children:w.reportsGeneratedCount}),e.jsx("p",{className:"text-gray-600 text-md",children:"Reports generated"})]}),e.jsxs("div",{className:"bg-[#FCB35B14] rounded-2xl p-6 flex flex-col items-center justify-center shadow cursor-pointer",onClick:()=>f("/appointments"),children:[e.jsx("img",{src:we,alt:"Appointments",className:"w-12 h-12 mb-2"}),e.jsx("span",{className:"text-2xl font-medium text-[#5E5F60]",children:w.appointmentsTodayCount}),e.jsx("p",{className:"text-gray-600 text-md",children:"Appointments"})]}),e.jsxs("div",{className:"bg-[#A9F20014] rounded-2xl p-6 flex flex-col items-center justify-center shadow cursor-pointer",onClick:()=>f("/referred-patients"),children:[e.jsx("img",{src:ye,alt:"Referral Patients",className:"w-12 h-12 mb-2"}),e.jsx("span",{className:"text-2xl font-medium text-[#5E5F60]",children:w.pendingAppointmentsCount}),e.jsx("p",{className:"text-gray-600 text-md",children:"Referral patients"})]})]}),e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Today's Appointments"}),e.jsx("div",{className:"space-y-4",children:se?e.jsx("div",{className:"text-gray-500",children:"Loading..."}):Q.length===0?e.jsx("div",{className:"text-gray-500",children:"No appointments for today."}):Q.map(t=>{var s;return e.jsxs("div",{onClick:()=>xe(t.userId),className:"bg-[#F8F3FA] cursor-pointer rounded-2xl p-4 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-[#E5E0EA] p-3 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-[#704180]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:((s=t.user)==null?void 0:s.name)||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.preferredTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})})]})]}),e.jsx("span",{className:"text-gray-500 text-sm",children:t.status}),e.jsx("button",{className:"p-2 rounded-full bg-[#E5E0EA] text-[#8B2D6C] hover:bg-[#D5CCD6]",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]},t.id)})})]}):e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 w-full max-w-6xl mx-auto mt-6",children:[e.jsxs("div",{className:"flex-1 w-full max-w-[650px] font-['Poppins'] mx-auto",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold mb-2 font-['Urbanist']",children:[e.jsx("span",{role:"img","aria-label":"wave",children:"ðŸ‘‹"})," ","Hey ",e.jsx("span",{className:"text-[#8B2D6C] font-bold font-['Urbanist']",children:q||"there"}),", ready to check in with yourself today?"]}),j&&e.jsx("div",{className:"my-4 w-full max-w-xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl p-4 flex items-center justify-between shadow",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:"https://zenomi.s3.ap-south-1.amazonaws.com/testanimations/WhatsApp_Image_2025-06-16_at_15.32.46_e9afbbd2.webp",alt:"Processing",style:{width:"64px",height:"64px",objectFit:"contain",display:"block"}}),e.jsx("span",{className:"text-lg font-semibold",children:"Zenomi AI is processing"})]}),e.jsxs("span",{className:"text-xl font-bold",children:[ae,"s"]})]})}),e.jsxs("div",{className:"mb-4 sm:mb-6 font-['Poppins']",children:[e.jsx("div",{className:"flex justify-between text-xs sm:text-sm text-gray-500 mb-1 font-['Poppins']",children:e.jsxs("span",{children:[p," of ",o.length," completed"]})}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-[#704180] to-[#8B2D6C]",style:{width:`${o.length?p/o.length*100:0}%`}})})]}),p===o.length&&o.length>0?e.jsxs("div",{className:"rounded-3xl p-6 sm:p-8 flex flex-col sm:flex-row items-center justify-between bg-[#E9D7F7] relative min-h-[200px] mb-8 w-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"All your tests are complete!"}),e.jsx("div",{className:"w-full h-4 bg-gray-200 rounded-full mb-3",children:e.jsx("div",{className:"h-4 rounded-full bg-[#F6C851]",style:{width:"100%"}})}),e.jsxs("div",{className:"text-lg mb-4",children:[p," out of ",o.length," tests completed"]}),e.jsx("button",{className:"px-8 py-3 rounded-full bg-gradient-to-r from-[#704180] to-[#8B2D6C] text-white font-semibold text-lg shadow hover:opacity-90 transition",onClick:()=>f("/results"),children:"View reports"})]}),e.jsx("img",{src:Ne,alt:"All tests complete",className:"w-40 h-40 object-contain ml-6 hidden sm:block"})]}):e.jsx("div",{className:"flex flex-col gap-4 sm:gap-6 font-['Poppins']",children:o==null?void 0:o.map(t=>e.jsxs("div",{className:`rounded-3xl p-4 sm:p-6 relative font-['Poppins'] ${t.testStatus==="COMPLETED"?"bg-gradient-to-r from-[#704180] to-[#8B2D6C]":t.testStatus==="UNLOCKED"?"bg-gradient-to-r from-[#704180] to-[#8B2D6C] ":"bg-gray-500 "}`,children:[e.jsx("div",{className:"absolute top-4 right-4",children:t.testStatus==="COMPLETED"?e.jsx("span",{className:"bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow",children:"Completed"}):e.jsx("span",{className:"bg-yellow-400 text-white text-xs font-bold px-3 py-1 rounded-full shadow",children:"Pending"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 sm:gap-6 font-['Poppins']",children:[e.jsx("img",{src:t.image_url,alt:t.name,className:"w-20 h-20 sm:w-28 sm:h-28 rounded-2xl object-cover"}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("h3",{className:`text-lg sm:text-xl font-bold text-white font-['Poppins'] ${t.testStatus==="COMPLETED"}`,children:t.name}),e.jsx("p",{className:`text-sm sm:text-base text-white font-['Poppins'] ${t.testStatus==="COMPLETED"}`,children:t.description||"No description available"}),t.testStatus==="UNLOCKED"&&(!j||y!==t.id)&&e.jsx("button",{className:`mt-4 px-4 py-2 sm:px-6 sm:py-2 rounded-full font-semibold text-sm sm:text-base font-['Poppins']
                                bg-white text-[#704180] hover:bg-gray-100`,onClick:()=>b(t),children:"Take test"})]})]}),t.testStatus!=="COMPLETED"&&t.testStatus!=="UNLOCKED"&&e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80  rounded-3xl z-10",children:e.jsxs("div",{className:"mb-6 flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-black bg-opacity-40 flex items-center justify-center mb-4",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("rect",{x:"7",y:"11",width:"10",height:"7",rx:"3.5",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M12 15v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M8 11V8a4 4 0 018 0v3",stroke:"currentColor",strokeWidth:"2",fill:"none"})]})}),e.jsxs("span",{className:"text-white text-xl sm:text-xl font-normal text-center drop-shadow-lg",children:["Complete the ",e.jsx("span",{className:"font-normal",children:t.unlockDependency||t.name||"test"})," to unlock"]})]})})]},t.id))}),p===o.length&&o.length>0&&W.length>0&&e.jsxs("div",{className:"w-full mt-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-4",children:"Continue learning"}),e.jsx("div",{className:"flex flex-col gap-4 sm:gap-6 max-h-[400px] overflow-y-auto scrollbar-thin scrollbar-thumb-[#8B2D6C]/40 scrollbar-track-transparent pr-2",children:W.map(t=>e.jsxs("div",{className:"rounded-3xl p-4 sm:p-8 bg-gradient-to-r from-[#704180] to-[#8B2D6C] text-white flex flex-col md:flex-row items-center md:items-start justify-between shadow-lg relative min-h-[140px] md:min-h-[180px] w-full",children:[e.jsxs("div",{className:"flex-1 min-w-0 w-full",children:[e.jsxs("div",{className:"uppercase text-xs sm:text-sm tracking-widest text-[#D1B3E0] mb-2",children:["Category - ",t.category]}),e.jsx("div",{className:"text-base sm:text-2xl font-bold mb-2 break-words",children:t.title}),e.jsx("a",{href:t.courseLink,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-4 px-4 py-2 sm:px-6 sm:py-3 rounded-full bg-white text-[#8B2D6C] font-semibold text-sm sm:text-lg shadow hover:bg-[#F3EAF7] transition w-full sm:w-auto text-center",children:"Continue â†’"})]}),e.jsx("div",{className:"hidden md:block absolute right-8 top-8 opacity-20 pointer-events-none select-none",children:e.jsxs("svg",{width:"120",height:"120",children:[e.jsx("circle",{cx:"30",cy:"30",r:"30",fill:"#fff"}),e.jsx("rect",{x:"60",y:"20",width:"40",height:"40",fill:"#fff"}),e.jsx("circle",{cx:"90",cy:"90",r:"25",fill:"#fff"})]})})]},t.id))})]})]}),e.jsxs("div",{className:"w-full lg:w-[350px] flex flex-col gap-4 sm:gap-6 font-['Poppins'] mt-4 lg:mt-0",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow p-4 sm:p-6 flex flex-col items-center border border-[#BCBCBC]",children:[e.jsx("img",{src:ge,alt:"Doctor",className:"w-36 h-20 sm:w-52 sm:h-32 object-cover rounded-xl mb-3 sm:mb-4"}),e.jsx("div",{className:"font-semibold text-base sm:text-lg mb-1 text-center",children:"Talk to a Doctor?"}),e.jsx("div",{className:"text-gray-500 text-center mb-3 sm:mb-4",children:"Book your session now"}),e.jsx("button",{onClick:()=>f("/appointments"),className:"px-4 sm:px-6 py-2 rounded-full font-medium text-sm sm:text-base text-white",style:{background:"linear-gradient(89.79deg, #704180 5.07%, #8B2D6C 95.83%)"},children:"Book now"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow p-6 sm:p-8 flex flex-col items-center border border-[#BCBCBC]",children:[e.jsx("div",{className:"mb-3 sm:mb-4",children:e.jsxs("svg",{width:"80",height:"80",children:[e.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"#E5E0EA",strokeWidth:"8",fill:"none"}),e.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"#704180",strokeWidth:"8",fill:"none",strokeDasharray:2*Math.PI*36,strokeDashoffset:2*Math.PI*36*(1-0/3),strokeLinecap:"round"}),e.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",fontSize:"1.2em",fill:"#704180",fontWeight:"bold",children:"0/3"})]})}),e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-1 sm:mb-2 text-center",children:["Welcome to Zenomi ,",e.jsx("span",{className:"text-[#8B2D6C]",children:q||"there"})]}),e.jsx("p",{className:"text-gray-500 text-center mb-4 sm:mb-6 text-xs sm:text-base",children:"Experience your AHA! moment by completing this simple steps"}),e.jsx("ul",{className:"w-full space-y-2 sm:space-y-3",children:me.map(t=>e.jsxs("li",{className:"flex items-center justify-between px-2 sm:px-4 py-2 rounded-lg bg-gray-100 text-gray-700 text-xs sm:text-base",children:[e.jsx("span",{children:t}),e.jsx("span",{className:"w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full bg-white border border-gray-300 text-gray-400",children:"âœ”ï¸"})]},t))})]})]})]})})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"rounded-3xl p-16 w-full max-w-lg shadow-lg flex flex-col items-center relative font-['Urbanist']",style:c.splash_image_s3_key?{backgroundImage:`url(${c.splash_image_s3_key})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"#F8F3FA",position:"relative"}:{backgroundColor:"#fff"},children:[e.jsx("button",{className:"absolute top-4 right-4 text-2xl text-gray-400 hover:text-gray-600 z-10",onClick:()=>b(null),children:"Ã—"}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.75)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.37)",backdropFilter:"blur(12px)",padding:"32px",borderRadius:"32px"},children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2 text-center z-10",children:["Ready for Your ",c.name,"?"]}),e.jsx("p",{className:"text-gray-600 text-center mb-6 z-10",children:c.description||"No description available"}),e.jsxs("div",{className:"flex justify-center flex-wrap gap-3 mb-8 z-10",children:[e.jsxs("span",{className:"bg-[#F3EAF7] text-[#704180] px-4 py-2 rounded-full flex items-center gap-2 text-sm font-medium",children:[e.jsx("span",{role:"img","aria-label":"timer",children:"â±"})," ","Takes 3 mins"]}),e.jsxs("span",{className:"bg-[#F3EAF7] text-[#704180] px-4 py-2 rounded-full flex items-center gap-2 text-sm font-medium",children:[e.jsx("span",{role:"img","aria-label":"questions",children:"ðŸ“‹"})," ",c.question_count," Questions"]}),e.jsxs("span",{className:"bg-[#F3EAF7] text-[#704180] px-4 py-2 rounded-full flex items-center gap-2 text-sm font-medium",children:[e.jsx("span",{role:"img","aria-label":"results",children:"ðŸŽ¯"})," ","Personalized Results"]})]}),e.jsx("button",{className:`w-full py-2 rounded-full t
                ext-white font-semibold text-lg mb-3 z-10`,style:{background:"linear-gradient(90deg, #704180 6.54%, #8B2D6C 90.65%)"},onClick:oe,children:"Start test"}),e.jsx("button",{className:"w-full py-2 rounded-full border border-[#8B2D6C] text-[#8B2D6C] font-semibold text-lg z-10",onClick:()=>b(null),children:"Cancel"})]})]})}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-[#F8F3FA] rounded-xl sm:rounded-2xl p-4 sm:p-6 w-full max-w-md shadow-lg flex flex-col items-center relative font-['Urbanist'] max-h-[90vh] overflow-y-auto scrollbar-none",style:{boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.18)",scrollbarWidth:"none",msOverflowStyle:"none"},children:[e.jsx("style",{children:`
              .scrollbar-none::-webkit-scrollbar { display: none; }
            `}),e.jsxs("h2",{className:"text-2xl font-bold mb-2 text-left w-full",children:[(c==null?void 0:c.name)||"Test"," Quiz"]}),X?e.jsx("div",{className:"flex items-center justify-center h-[350px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#8B2D6C] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading questions..."})]})}):u.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full flex items-center mb-6",children:e.jsx("div",{className:"flex-1 h-3 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-[#F3C96B] to-[#E5E0EA]",style:{width:`${(a+1)/u.length*100}%`}})})}),e.jsxs("div",{className:"w-full bg-[#F8F3FA] rounded-2xl p-8 flex flex-col items-center",children:[e.jsxs("div",{className:"text-center mb-4 text-gray-700 font-semibold",children:["Question ",String(a+1).padStart(2,"0"),"/",u.length]}),e.jsx("div",{className:"text-center text-xl font-bold mb-8",children:(Y=u[a])==null?void 0:Y.question}),e.jsx("div",{className:"flex flex-col gap-4 w-full max-w-xl",children:(()=>{var s,r;const t=u[a];return t?t.questionType==="NUMBER"?e.jsx("input",{type:"number",className:"w-full py-4 rounded-full border-2 border-[#8B2D6C] text-lg font-medium px-6",value:((s=x[a])==null?void 0:s.answer)||"",onChange:l=>D(l.target.value)}):t.questionType==="BOOLEAN"?e.jsx("div",{className:"flex gap-4",children:["Yes","No"].map(l=>{var i;return e.jsx("button",{className:`flex-1 py-4 rounded-full border-2 text-lg font-medium ${((i=x[a])==null?void 0:i.answer)===l?"bg-gradient-to-r from-[#704180] to-[#8B2D6C] text-white":"border-[#8B2D6C] text-[#704180] bg-white"}`,onClick:()=>D(l),children:l},l)})}):t.questionType==="TEXT"?e.jsx("textarea",{className:"w-full py-4 rounded-2xl border-2 border-[#8B2D6C] text-lg font-medium px-6",rows:4,value:((r=x[a])==null?void 0:r.answer)||"",onChange:l=>D(l.target.value)}):(t.scaleOptions||[]).map(l=>{var i;return e.jsx("button",{className:`w-full py-4 rounded-full border-2 text-lg font-medium ${((i=x[a])==null?void 0:i.answer)===l?"bg-gradient-to-r from-[#704180] to-[#8B2D6C] text-white":"border-[#8B2D6C] text-[#704180] bg-white"}`,onClick:()=>D(l),children:l.split(":")[0]},l)}):null})()}),e.jsxs("div",{className:"flex justify-between w-full mt-8",children:[e.jsx("button",{className:"px-8 py-2 rounded-full border-2 border-[#8B2D6C] text-[#8B2D6C] font-medium",onClick:ce,disabled:a===0,children:"Previous"}),e.jsx("button",{className:"px-8 py-2 rounded-full bg-gradient-to-r from-[#704180] to-[#8B2D6C] text-white font-medium",onClick:ie,disabled:_||!x[a]||!x[a].answer,children:_?"Submitting...":a===u.length-1?"Submit":"Next"})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-[350px]",children:e.jsx("p",{className:"text-gray-600",children:"No questions available"})})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-white rounded-3xl p-10 w-full max-w-lg shadow-lg flex flex-col items-center relative",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2 text-center",children:["You've Completed the ",ne||"Test","!"]}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Your results are ready and personalized just for you."}),e.jsx("button",{className:"w-full py-3 rounded-full text-white font-semibold text-lg mb-3",style:{background:"linear-gradient(90deg, #704180 6.54%, #8B2D6C 90.65%)"},onClick:()=>de(),children:"Back to homescreen"}),p!==o.length&&e.jsx("button",{className:"w-full py-3 rounded-full border border-[#8B2D6C] text-[#8B2D6C] font-semibold text-lg",onClick:()=>{F(!1);const t=o.find(s=>s.testStatus==="UNLOCKED");t&&b(t)},children:"Take next test"})]})})]})}const Ae=()=>e.jsx(ve,{});export{Ae as default};
