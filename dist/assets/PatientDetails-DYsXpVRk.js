import{k as m,r as c,j as e,a as h}from"./index-eotYzDwS.js";import{a as p}from"./api-d8MCFFl8.js";import"./index-DW_MHI2K.js";const u=()=>{const{id:i}=m(),[s,d]=c.useState(null),[x,n]=c.useState(!0);c.useEffect(()=>{(async()=>{n(!0);try{const a=h.get("auth");let r="";if(a)try{r=JSON.parse(a).token}catch{r=""}if(!i){console.error("Patient ID is missing."),n(!1);return}const o=await p.get(`/doctors/user?userId=${i}`,{headers:{Authorization:`Bearer ${r}`}});o.data.success?d(o.data.data):(console.error("Failed to fetch patient details:",o.data),d(null))}catch(a){console.error("Error fetching patient details:",a),d(null)}finally{n(!1)}})()},[i]);const l=t=>{const a={year:"numeric",month:"short",day:"numeric"};return new Date(t).toLocaleDateString(void 0,a)};return x?e.jsx("div",{className:"flex justify-center items-center h-screen text-xl",children:"Loading patient details..."}):s?e.jsxs("div",{className:"p-4 md:p-8 bg-[#FAF8FB] min-h-screen font-['Poppins']",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-8 shadow flex flex-col md:flex-row items-center md:items-start gap-6 border border-gray-100",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-[#8B2D6C1A] flex items-center justify-center text-[#8B2D6C] font-semibold text-4xl overflow-hidden border-4 border-[#8B2D6C]",children:s.profilePicture?e.jsx("img",{src:s.profilePicture,alt:s.name,className:"w-full h-full object-cover"}):s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[#1A2343] mb-1",children:s.name}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-1 text-gray-700 text-base",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",s.email]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",s.countryCode," ",s.phoneNumber]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Gender:"})," ",s.gender]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"DOB:"})," ",l(s.dob)]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Created:"})," ",l(s.createdAt)]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Updated:"})," ",l(s.updatedAt)]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-8 shadow border border-gray-100",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h2",{className:"text-xl md:text-2xl font-semibold text-gray-800",children:["Tests done ",e.jsxs("span",{className:"text-[#8B2D6C]",children:["(",s.tests.length,")"]})]})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.tests.length===0&&e.jsx("div",{className:"text-gray-500",children:"No tests available."}),s.tests.map(t=>e.jsxs("div",{className:"bg-[#FBF9FF] rounded-xl p-5 flex flex-col gap-3 shadow-sm border border-[#E9D8F4]",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsxs("div",{className:"mb-2 md:mb-0",children:[e.jsxs("p",{className:"font-semibold text-[#8B2D6C] text-lg",children:["Cycle: ",t.cycle]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Tests Completed: ",t.testsCompleted]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created: ",l(t.createdAt)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Updated: ",l(t.updatedAt)]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-3",children:[t.reportView&&e.jsx("a",{href:t.reportView,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 rounded-full bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] text-white text-sm font-semibold shadow hover:opacity-90 transition",children:"View Report"}),t.detailedReportView&&e.jsx("a",{href:t.detailedReportView,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 rounded-full bg-gradient-to-r from-[#8B2D6C] to-[#C6426E] text-white text-sm font-semibold shadow hover:opacity-90 transition",children:"View Detailed"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mt-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-700 mb-1",children:"Raw Scores:"}),e.jsx("ul",{className:"list-disc ml-6 text-sm text-gray-800",children:Object.entries(t.rawScores).map(([a,r])=>e.jsxs("li",{children:[a,": ",r]},a))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-700 mb-1",children:"Normalized Scores:"}),e.jsx("ul",{className:"list-disc ml-6 text-sm text-gray-800",children:Object.entries(t.normalizedScores).map(([a,r])=>e.jsxs("li",{children:[a,": ",r]},a))})]})]})]},t.id))]})]}),s.isCourseAssigned&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Course Assigned"}),e.jsx("p",{className:"text-gray-700",children:"A course has been assigned to this patient."})]})]}):e.jsx("div",{className:"flex justify-center items-center h-screen text-xl text-red-600",children:"Patient not found or an error occurred."})};export{u as default};
